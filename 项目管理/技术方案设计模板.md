# 技术方案设计模板

> 该规范主要目的有两个：

- > 作为一份完整的checkList，供方案设计人员参考和备忘，避免遗漏方案内容

- > 作为一份模板，如无特殊必要性，尽量保证一致的组织形式和输出样式，降低理解成本和协作成本，同时保障知识沉淀的质量和效率

> 规范内容板块按照重要性和价值分为2个级别：

- > 【必选】：根据项目需求实际情况，有涉及该板块的必须输出

- > 【建议】：根据项目需求实际情况，以充分表达方案的完整性、专业性和合理性为目标，方案设计负责人自行决策是否输出

# 需求概述

> PRD:

## 项目背景【必选】

## 需求目标【必选】





# **概念声明**

> 目的：针对属于和核心概念，统一认知，降低沟通成本，提高评审人员对于开发方案的理解程度

## 统一语言

## 核心概念【必选】





# 技术调研

> 目的：知己知彼，百战不殆；好的方案一定是基于对系统现状的充分了解和分析；同时借鉴业界主流方案，评估项目整体技术可行性

## 现状分析【建议】

## 可行性分析【建议】





# 总体设计

## 架构设计【必选】

> 目的：阐述系统整体架构设计，让评审人员有一个全局视图，涉及哪些系统和模块，相互间依赖耦合情况，整体架构层次划分

> 期望表达信息

## 用例设计【必选】

> 目的：系统的状态流转和数据流转全部都是基于用例，通过对于用例的闭环梳理能够保障系统的完整性，以及对后续流程设计起到关键指导作用

> 期望表达信息：

## 状态设计【必选】

> 目的：

> 期望表达信息：





# 功能设计

> 按系统和领域拆分设计

## 功能概述和设计思路【必选】

> 描述该系统和领域在该需求中主要提供的能力，以及核心设计思路

## 流程设计【必选】

> 核心原则：涵盖核心节点，需体现关键节点的数据层影响

## UML设计【必选】

### 核心class模型

> 目的：

### 逻辑推演

> 目的：基于领域模型的伪代码编排，区分哪些是service能力，哪些是领域能力

## 实体模型和ER图【必选】

> 核心原则：数据存取效率和支撑量级，不要关心数据模型和业务的对应性以及可读性

## 依赖关系【必选】

### 内部服务依赖（系统内服务）

| **接口** | **名称** | **归属团队** | **依赖强弱（强/中/弱）** | **QPS要求** |
| -------- | -------- | ------------ | ------------------------ | ----------- |
|          |          |              |                          |             |

### 外部服务依赖（外部服务，如：支付宝）

| **接口** | **名称** | **HTTP Method** | **Timeout设置（ms）** | **是否需熔断** | **QPS要求** |
| -------- | -------- | --------------- | --------------------- | -------------- | ----------- |
|          |          |                 |                       |                |             |

## 风险评估【必选】

> 目的：集中说明方案设计中潜在的风险和隐患，在技术方案评审环节由架构师和技术专家重点把控

## 折中设计说明【建议】

> 目的：为了降低系统复杂度，合理的边界假设；该假设一定是基于业务调研分析后认定合理的，可预期时间内不会被打破

## 扩展性评估【建议】

> 目的：对本次项目不支持的场景进行合理假设，评估功能扩展对系统的影响





# 非功能性设计

## 服务性能【必选】

> 从技术角度衡量关键功能SLA指标。如并发数，RT，QPS/TPS等。具体数据根据业务需求评估，但单机QPS要求>=100（TPS适当放宽），并发能力>=50。

| **接口**               | **单机并发数** | **P90 RT(ms)** | **QPS/TPS** |
| ---------------------- | -------------- | -------------- | ----------- |
| 根据用户id查询账户余额 | 200            | <100           | >500        |

## 异步设计【必选】

| **接口/场景** | **说明** | **异步实现方式** |
| ------------- | -------- | ---------------- |
|               |          |                  |

## 缓存设计【必选】

> 涵盖范围：缓存技术本身的通用设计

## 数据一致性保障

| **接口/场景** | **说明** | **保障策略** |
| ------------- | -------- | ------------ |
|               |          |              |

## 防腐设计【必选】

## 监控预警【必选】

## 降级方案【必选】

| **接口/场景** | **说明** | **降级策略** | **用户感知** | **业务影响** |
| ------------- | -------- | ------------ | ------------ | ------------ |
|               |          |              |              |              |

## 流控

| **接口** | **说明** | **流控策略** |
| -------- | -------- | ------------ |
|          |          |              |

## 容错【必选】

| **接口/场景** | **说明** | **是否跨服务调用** | **补偿策略** |
| ------------- | -------- | ------------------ | ------------ |
|               |          | 否                 | 事务回滚     |

## 安全设计【建议】

### 输入校验

> *说明：业务无关性的输入数据校验；讲述对于用户输出的数据的校验策略，前后端均需校验。可采用框架层校验，并说明采用的校验框架。框架层无法校验的业务数据，需业务层进行校验。对于疑似安全攻击代码，诸如XSS，CSRF，SQL注入，脚本注入等可通过框架层统一实现。*

### 敏感信息

> *讲述对于敏感信息的控制策略。敏感信息以数据团队定义为准。如无，可写不涉及*

### 数据泄露

> *讲述对于数据权限的控制策略。数据应仅供所有者、上级机构或监管机构查询和使用。此处说明如何实现的防数据越权访问。如无，可写不涉及。*

> *案例如根据订单编号查询订单，应先校验订单编号与查询人的归属或从属关系，校验通过方可查看。*

## 基础设施和组件依赖【必选】

> *讲述对基础架构组的服务及中间件的依赖。如需架构组开发公共服务或调整中间件，在此进行详细说明。如：依赖中间件elasticsearch，需将elasticsearch升级到6.2.x版本。*





# 接口设计【必选】

> *依托接口平台*





# 发布方案核心策略

> 说明：

